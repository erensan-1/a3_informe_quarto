<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Enrique Reñé Sánchez (Técnico SIG)">
<meta name="author" content="Cristian González Alonso (Ingeniero de datos)">
<meta name="author" content="Juan Jorge Rosales León (Dirección técnica)">
<meta name="dcterms.date" content="2025-09-01">

<title>Metodología empleada para la resolución de la Tarea A3 ‘Vías sin código de vía INE’</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="a3_informe_files/libs/clipboard/clipboard.min.js"></script>
<script src="a3_informe_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="a3_informe_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="a3_informe_files/libs/quarto-html/popper.min.js"></script>
<script src="a3_informe_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="a3_informe_files/libs/quarto-html/anchor.min.js"></script>
<link href="a3_informe_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="a3_informe_files/libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="a3_informe_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="a3_informe_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="a3_informe_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<style>

      .quarto-title-block .quarto-title-banner {
        background-image: url(mapas/FONDO_IT_1.png);
background-size: cover;
      }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="quarto-light">

<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-right">
      <h1 class="title">Metodología empleada para la resolución de la Tarea A3 ‘Vías sin código de vía INE’</h1>
                      </div>
  </div>
    
  <div class="quarto-title-meta-author column-page-right">
    <div class="quarto-title-meta-heading">Authors</div>
    <div class="quarto-title-meta-heading">Affiliation</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author"><em>Enrique Reñé Sánchez (Técnico SIG)</em> </p>
    </div>
    <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <img src="mapas/GRAFCANa_logo_color.png" class="img-fluid" style="width:1in" alt="GRAFCAN Logo">
            </p>
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author"><em>Cristian González Alonso (Ingeniero de datos)</em> </p>
    </div>
    <div class="quarto-title-meta-contents">
        </div>
      <div class="quarto-title-meta-contents">
      <p class="author"><em>Juan Jorge Rosales León (Dirección técnica)</em> </p>
    </div>
    <div class="quarto-title-meta-contents">
        </div>
    </div>

  <div class="quarto-title-meta column-page-right">

        
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">September 1, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-full toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="3">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#sec-resumen" id="toc-sec-resumen" class="nav-link active" data-scroll-target="#sec-resumen"><span class="header-section-number">1</span> Resumen</a>
  <ul>
  <li><a href="#información-de-partida-y-análisis-inicial" id="toc-información-de-partida-y-análisis-inicial" class="nav-link" data-scroll-target="#información-de-partida-y-análisis-inicial"><span class="header-section-number">1.1</span> Información de partida y análisis inicial</a></li>
  <li><a href="#fuentes-de-datos-empleadas" id="toc-fuentes-de-datos-empleadas" class="nav-link" data-scroll-target="#fuentes-de-datos-empleadas"><span class="header-section-number">1.2</span> Fuentes de datos empleadas</a></li>
  </ul></li>
  <li><a href="#flujo-metodológico" id="toc-flujo-metodológico" class="nav-link" data-scroll-target="#flujo-metodológico"><span class="header-section-number">2</span> Flujo metodológico</a>
  <ul>
  <li><a href="#preparación-del-entorno" id="toc-preparación-del-entorno" class="nav-link" data-scroll-target="#preparación-del-entorno"><span class="header-section-number">2.1</span> Preparación del entorno</a></li>
  <li><a href="#normalización" id="toc-normalización" class="nav-link" data-scroll-target="#normalización"><span class="header-section-number">2.2</span> Normalización</a></li>
  <li><a href="#emparejamiento" id="toc-emparejamiento" class="nav-link" data-scroll-target="#emparejamiento"><span class="header-section-number">2.3</span> Emparejamiento</a>
  <ul class="collapse">
  <li><a href="#hs---vv-match-exacto" id="toc-hs---vv-match-exacto" class="nav-link" data-scroll-target="#hs---vv-match-exacto"><span class="header-section-number">2.3.1</span> HS - VV (match exacto)</a></li>
  <li><a href="#hs---vv-fuzzy-match" id="toc-hs---vv-fuzzy-match" class="nav-link" data-scroll-target="#hs---vv-fuzzy-match"><span class="header-section-number">2.3.2</span> HS - VV (fuzzy match)</a></li>
  <li><a href="#hs---catastro-match-exacto" id="toc-hs---catastro-match-exacto" class="nav-link" data-scroll-target="#hs---catastro-match-exacto"><span class="header-section-number">2.3.3</span> HS - Catastro (match exacto)</a></li>
  <li><a href="#hs---callejero-sitcan-match-exacto-por-código-de-vía" id="toc-hs---callejero-sitcan-match-exacto-por-código-de-vía" class="nav-link" data-scroll-target="#hs---callejero-sitcan-match-exacto-por-código-de-vía"><span class="header-section-number">2.3.4</span> HS - Callejero SITCAN (match exacto por código de vía)</a></li>
  <li><a href="#hs---catastro-fuzzy-match" id="toc-hs---catastro-fuzzy-match" class="nav-link" data-scroll-target="#hs---catastro-fuzzy-match"><span class="header-section-number">2.3.5</span> HS - Catastro (fuzzy match)</a></li>
  <li><a href="#hs---callejero-sitcan-fuzzy-match" id="toc-hs---callejero-sitcan-fuzzy-match" class="nav-link" data-scroll-target="#hs---callejero-sitcan-fuzzy-match"><span class="header-section-number">2.3.6</span> HS - Callejero SITCAN (fuzzy match)</a></li>
  <li><a href="#hs---cc-match-exacto" id="toc-hs---cc-match-exacto" class="nav-link" data-scroll-target="#hs---cc-match-exacto"><span class="header-section-number">2.3.7</span> HS - CC (match exacto)</a></li>
  <li><a href="#hs---cc-fuzzy-match" id="toc-hs---cc-fuzzy-match" class="nav-link" data-scroll-target="#hs---cc-fuzzy-match"><span class="header-section-number">2.3.8</span> HS - CC (fuzzy match)</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#resultados" id="toc-resultados" class="nav-link" data-scroll-target="#resultados"><span class="header-section-number">3</span> Resultados</a>
  <ul>
  <li><a href="#distribución-por-municipio" id="toc-distribución-por-municipio" class="nav-link" data-scroll-target="#distribución-por-municipio"><span class="header-section-number">3.1</span> Distribución por municipio</a></li>
  <li><a href="#productos-cartográficos" id="toc-productos-cartográficos" class="nav-link" data-scroll-target="#productos-cartográficos"><span class="header-section-number">3.2</span> Productos cartográficos</a></li>
  </ul></li>
  <li><a href="#análisis-del-residuo" id="toc-análisis-del-residuo" class="nav-link" data-scroll-target="#análisis-del-residuo"><span class="header-section-number">4</span> Análisis del residuo</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
</div>
<main class="content quarto-banner-title-block column-page-right" id="quarto-document-content">





<div id="6cbaac61" class="cell" data-execution_count="1">
<div class="cell-output cell-output-display">

<div class="card mb-3" style="padding:10px; background-color:#f8f9fa; border-left: 5px solid #09488bff;">
  <strong>Proyecto:</strong> Tenerife Padrón 2.0 (Cabildo Tenerife) - Padrón Online (INE)
</div>
</div>
</div>
<p>Mediante la Orden TER/1235/2023 (E2025001009), el Cabildo de Tenerife encarga a Cartográfica de Canarias S.A. (GRAFCAN) la ejecución de tareas de análisis y depuración del padrón de municipios de menos de 20.000 habitantes, en el marco del proyecto <em>TenerifePadrón 2.0</em>, encuadrado a su vez en la iniciativa <em>Padrón Online</em> del INE.</p>
<section id="sec-resumen" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Resumen</h1>
<p>Este documento describe la metodología empleada para la resolución de la Tarea A1 (‘Hogares sin CIV’) , que consiste en la asignación de Código de Identificación de Vivienda (CIV) para aquellos hogares que carecen del mismo. La aproximación se centra en la búsqueda de emparejamientos mediante dirección para los ficheros proporcionados por el INE, así como la comparación contra otras fuentes de datos. Tras un emparejamiento exitoso, se realiza la asignación de CIV para el hogar de acuerdo con el procedimiento dispuesto en la <a href="mapas/Guia_Tecnica_de_Subvenciones.pdf" target="_blank">Guía Técnica de Subvenciones</a>.</p>
<p>Dada la inexistencia de un mecanismo de emparejamiento unívoco, la variedad en los formatos de nomenclatura y la incompletitud de las descripciones hasta nivel de inmueble, se ha optado por emplear distintos métodos de emparejamiento basados en coincidencia exacta y coincidencia difusa (aplicando primero los más conservadores y optimizando los menos restrictivos para minimizar los falsos positivos), para las direcciones hasta nivel de parcela.</p>
<p>Los resultados reflejan un <strong>82,25% de asignación</strong> a nivel global tras la comparación con todas las fuentes de datos (asumiendo cierto margen de error para los registros procedentes de coincidencia difusa, si bien se ha trabajado en minimizarlo). Para aquellos registros que forman parte del <strong>residuo (17,75%)</strong>, con correspondiente nueva alta de CIV, se realizó una revisión exhaustiva de los motivos de no asignación, entre los que destacan la falta de descripciones completas en el fichero origen o las fuentes comparadas.</p>
<p>El desarrollo y resultados de los trabajos se plasman en el presente informe, así como en el <a href="mapas/Atlas_v2.pdf" target="_blank">atlas</a> que muestra la distribución espacial de los hogares y estadísticos más relevantes para cada municipio.</p>
<section id="información-de-partida-y-análisis-inicial" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="información-de-partida-y-análisis-inicial"><span class="header-section-number">1.1</span> Información de partida y análisis inicial</h2>
<p>La información proporcionada por el INE es la siguiente:</p>
<ul>
<li><em>Registros del fichero de hogares sin CIV (HSppmmml.023).</em></li>
</ul>
<p>Inicialmente, con el fin de recuperar la referencia catastral a 20 dígitos (RC20) desde el fichero de viviendas, se buscó emparejar la dirección <strong>hasta nivel de inmueble</strong>. Sin embargo, debido a la incompletitud de los campos de dirección y la falta de información suficiente en muchos registros, el <strong>nivel de emparejamiento conseguido fue muy bajo</strong>.</p>
<p>Por este motivo, se descartó esta vía y se optó por realizar el emparejamiento <strong>hasta nivel de portal</strong>, lo que garantiza una mayor cobertura de los hogares aunque con menor detalle. De este modo, la asignación de CIV se realizó a partir de la referencia catastral a 14 dígitos (RC14), lo que <strong>implica la incapacidad de asociar la figura del hogar al inmueble.</strong></p>
</section>
<section id="fuentes-de-datos-empleadas" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="fuentes-de-datos-empleadas"><span class="header-section-number">1.2</span> Fuentes de datos empleadas</h2>
<p>Si bien la búsqueda se realizó primero contra el fichero de viviendas como fuente preferente para la asignación de CIV, dado que esta solo recupera alrededor del 27% de registros, se buscaron las direcciones de los hogares del fichero HS contra las siguientes fuentes complementarias:</p>
<ul>
<li><strong>Catastro</strong>: ficheros CAT (alfanumérico) y cartografía vectorial (gráfico) con información de fincas, unidades constructivas e inmuebles urbanos y rústicos.</li>
<li><strong>Callejero del SITCAN</strong> (Sistema de Información Territorial de Canarias): gestionado y mantenido por GRAFCAN, constituye la base oficial de referencia para la red viaria de Canarias.</li>
</ul>
</section>
</section>
<section id="flujo-metodológico" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Flujo metodológico</h1>
<p>La asignación de CIV a cada hogar se desarrolla en una secuencia de etapas, resumidas a continuación para proporcionar una visión global del proceso:</p>
<ol type="1">
<li><p><strong>Preparación del entorno:</strong></p>
<ul>
<li><p>Importación de librerías para manejo de datos (<code>pandas</code>, <code>geopandas</code>, <code>sqlalchemy</code>), geoprocesamiento (<code>shapely</code>), coincidencia difusa (<code>rapidfuzz</code>, <code>sklearn</code>) y conexión a PostgreSQL/PostGIS.</p></li>
<li><p>Definición de diccionarios de normalización: equivalencias oficiales para desabreviación, casos de abreviación detectados manualmente, equivalencias de nombres de calles detectadas manualmente, casos especiales donde se debe incluir información de bloque/portal.</p></li>
</ul></li>
<li><p><strong>Normalización</strong>: para mejorar la capacidad de emparejamiento se aplican una serie de funciones de preprocesamiento (conversión a mayúsculas, eliminación de acentos y carácteres especiales, separación de sufijos y prefijos, etc). Dicho proceso se aplica tanto al registro procedente del fichero HS como al de la fuente contra la que se compara.</p></li>
<li><p><strong>Carga de datos</strong>: conexión a la base de datos para obtener los ficheros HS y las fuentes a comparar (viviendas, catastro, callejero SITCAN y cartociudad).</p></li>
<li><p><strong>Emparejamiento</strong>:</p>
<p>Primero se ha aplicado el método más conservador (coincidencia exacta) y luego aquellos menos restrictivos (coincidencia difusa o fuzzy matching). Este proceso se realiza de forma iterativa cruzando las descripciones contra las fuentes de referencia, repitiendo un esquema similar en cascada. Así pues, primero se intenta completar con VV, y para aquellos registros pendientes de asignación se cruza contra catastro, callejero SITCAN y finalmente CartoCiudad.</p>
<ul>
<li><p><strong>Match exacto</strong>: se busca coincidencia directa entre la dirección normalizada de HS y la fuente. Si coincide se asigna la RC14, las coordenadas, y método-fuente de emparejamiento.</p></li>
<li><p><strong>Fuzzy match</strong>: se busca coincidencia de similitud textual con RapidFuzz + TF-IDF + nearest neighbors. Se valida el match por nivel de similitud (umbral de <em>score</em>) y la premisa de coincidencia exacta de código de municipio y portal entre los registros. Si cumple los criterios se asigna RC14, coordenadas y método-fuente de emparejamiento.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Filtros y umbrales
</div>
</div>
<div class="callout-body-container callout-body">
<p>Aunque el criterio principal de validación del emparejamiento por cadenas ha sido el <em>score</em> de <code>rapidfuzz</code>, previamente se aplicó un filtro de preselección basado en <em>Nearest Neighbors</em> sobre vectores TF-IDF. Este filtro inicial permite identificar, para cada hogar, la dirección candidata más próxima en el espacio de n-gramas y descartar coincidencias con baja similitud, reduciendo así el riesgo de falsos positivos en la comparación final.</p>
<p>El umbral de similitud para aceptar emparejamientos varía en cada proceso, y se asigna tras una calibración manual orientada a equilibrar recuperación y reducción de falsos positivos. En general, se sitúa entre el 70 % y el 80 %.</p>
</div>
</div></li>
</ul></li>
<li><p><strong>Actualización y exportación</strong>: se actualiza el fichero HS con las nuevas asignaciones y campos completos. Se exportan resultados a archivos excel para revisión manual.</p></li>
<li><p><strong>Métricas de evaluación</strong>: tras cada proceso se reportan el total de hogares de entrada, los asignados en esa fase, el porcentaje de coincidencia exacta o difusa y la asignación acumulada (cobertura total).</p></li>
<li><p><strong>Asignación de CIV</strong>:</p>
<p>Dado que el detalle al que se resuelve el emparejamiento es a nivel de parcela (y no de inmueble por las motivos expuestos anteriormente), se ha recuperado para cada emparejamiento la RC14:</p>
<ul>
<li><p><strong>Fichero de viviendas</strong>: recuperación directa desde el campo ‘CIV’ (primeros 14 dígitos).</p></li>
<li><p><strong>Fuente catastro</strong>: recuperación directa desde el campo ‘id_parcela_catastral’.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Generación de puntos
</div>
</div>
<div class="callout-body-container callout-body">
<p>Tras unir la cartografía vectorial con el fichero alfanumérico CAT, se genera un punto dentro de cada parcela que queda contenido en su superficie. No se utiliza el centroide, ya que en parcelas irregulares o con huecos podría situarse fuera de la geometría, por lo que se calcula un punto ajustado garantizando su ubicación interna.</p>
</div>
</div></li>
<li><p><strong>Fuentes callejero y cartociudad</strong>: dado que el emparejamiento está asociado a un punto de la capa de portales, se recupera la RC14 por la vía espacial mediante cruce con la geometría vectorial de las parcelas catastrales.</p></li>
</ul>
<p>Una vez recuperada la RC14 para aquellos registros con emparejamiento exitoso, se aplica el proceso de generación del CIV a cada hogar de acuerdo con las directrices recogidas en la <a href="mapas/Guia_Tecnica_de_Subvenciones.pdf" target="_blank">Guía Técnica de Subvenciones</a> .</p></li>
<li><p><strong>Ficheros de salida</strong>:</p>
<p>Tras la modificación del fichero HS con los nuevos emparejamientos y la generación de altas de viviendas para aquellos registros sin emparejamiento exitoso, se generan los siguientes archivos de salida de acuerdo con la estructura de datos establecida:</p>
<ul>
<li><p><em>HSppmmmA.023: registros del fichero de hogares con CIV cumplimentado.</em></p></li>
<li><p><em>VAppmmmA.023: registros del fichero de alta de viviendas con CIV nuevo.</em></p></li>
</ul></li>
</ol>
<section id="preparación-del-entorno" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="preparación-del-entorno"><span class="header-section-number">2.1</span> Preparación del entorno</h2>
<p>Diccionario de abreviaciones:</p>
<p>Diccionario de vías equivalentes:</p>
<p>Diccionario de direcciones que requieren añadir portal para mejorar su emparejamiento:</p>
</section>
<section id="normalización" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="normalización"><span class="header-section-number">2.2</span> Normalización</h2>
<p>Definición de funciones de limpieza y normalización de las descripciones:</p>
<p>Aplicación de funciones de normalización:</p>
</section>
<section id="emparejamiento" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="emparejamiento"><span class="header-section-number">2.3</span> Emparejamiento</h2>
<section id="hs---vv-match-exacto" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="hs---vv-match-exacto"><span class="header-section-number">2.3.1</span> HS - VV (match exacto)</h3>
</section>
<section id="hs---vv-fuzzy-match" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="hs---vv-fuzzy-match"><span class="header-section-number">2.3.2</span> HS - VV (fuzzy match)</h3>
</section>
<section id="hs---catastro-match-exacto" class="level3" data-number="2.3.3">
<h3 data-number="2.3.3" class="anchored" data-anchor-id="hs---catastro-match-exacto"><span class="header-section-number">2.3.3</span> HS - Catastro (match exacto)</h3>
</section>
<section id="hs---callejero-sitcan-match-exacto-por-código-de-vía" class="level3" data-number="2.3.4">
<h3 data-number="2.3.4" class="anchored" data-anchor-id="hs---callejero-sitcan-match-exacto-por-código-de-vía"><span class="header-section-number">2.3.4</span> HS - Callejero SITCAN (match exacto por código de vía)</h3>
</section>
<section id="hs---catastro-fuzzy-match" class="level3" data-number="2.3.5">
<h3 data-number="2.3.5" class="anchored" data-anchor-id="hs---catastro-fuzzy-match"><span class="header-section-number">2.3.5</span> HS - Catastro (fuzzy match)</h3>
</section>
<section id="hs---callejero-sitcan-fuzzy-match" class="level3" data-number="2.3.6">
<h3 data-number="2.3.6" class="anchored" data-anchor-id="hs---callejero-sitcan-fuzzy-match"><span class="header-section-number">2.3.6</span> HS - Callejero SITCAN (fuzzy match)</h3>
</section>
<section id="hs---cc-match-exacto" class="level3" data-number="2.3.7">
<h3 data-number="2.3.7" class="anchored" data-anchor-id="hs---cc-match-exacto"><span class="header-section-number">2.3.7</span> HS - CC (match exacto)</h3>
</section>
<section id="hs---cc-fuzzy-match" class="level3" data-number="2.3.8">
<h3 data-number="2.3.8" class="anchored" data-anchor-id="hs---cc-fuzzy-match"><span class="header-section-number">2.3.8</span> HS - CC (fuzzy match)</h3>
</section>
</section>
</section>
<section id="resultados" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Resultados</h1>
<p>En esta primera aproximación se ha conseguido la asignación del <strong>82,25 %</strong> del total de registros del fichero HS, distribuida de la siguiente manera según su método y fuente de recuperación:</p>
<section id="distribución-por-municipio" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="distribución-por-municipio"><span class="header-section-number">3.1</span> Distribución por municipio</h2>
</section>
<section id="productos-cartográficos" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="productos-cartográficos"><span class="header-section-number">3.2</span> Productos cartográficos</h2>
<p>A continuación, se muestra la distribución espacial de los hogares asignados a través de una serie de mapas con estadísticos relevantes. Si se desea una visualización más interactiva que permita explorar zonas con más detalle se puede consultar el siguiente <a href="https://erensan-1.github.io/a1_padron_online/a1_hs_recuperados.html#11/28.2966/-16.4777" target="_blank">visor</a>, que permite el filtrado por municipio y por fuente - método de asignación.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Arafo</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Arico</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Buenavista del Norte</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">El Rosario</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">El Sauzal</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-6-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-6" role="tab" aria-controls="tabset-1-6" aria-selected="false" href="">El Tanque</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-7-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-7" role="tab" aria-controls="tabset-1-7" aria-selected="false" href="">Fasnia</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-8-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-8" role="tab" aria-controls="tabset-1-8" aria-selected="false" href="">Garachico</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-9-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-9" role="tab" aria-controls="tabset-1-9" aria-selected="false" href="">La Guancha</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-10-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-10" role="tab" aria-controls="tabset-1-10" aria-selected="false" href="">La Matanza de Acentejo</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-11-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-11" role="tab" aria-controls="tabset-1-11" aria-selected="false" href="">La Victoria de Acentejo</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-12-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-12" role="tab" aria-controls="tabset-1-12" aria-selected="false" href="">Los Silos</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-13-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-13" role="tab" aria-controls="tabset-1-13" aria-selected="false" href="">San Juan de la Rambla</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-14-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-14" role="tab" aria-controls="tabset-1-14" aria-selected="false" href="">Santiago del Teide</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-15-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-15" role="tab" aria-controls="tabset-1-15" aria-selected="false" href="">Tegueste</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-16-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-16" role="tab" aria-controls="tabset-1-16" aria-selected="false" href="">Vilaflor</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><img src="mapas/Arafo.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p><img src="mapas/Arico.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p><img src="mapas/Buenavista%20del%20Norte.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<p><img src="mapas/El%20Rosario.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<p><img src="mapas/El%20Sauzal.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-6" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-6-tab">
<p><img src="mapas/El%20Tanque.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-7" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-7-tab">
<p><img src="mapas/Fasnia.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-8" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-8-tab">
<p><img src="mapas/Garachico.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-9" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-9-tab">
<p><img src="mapas/La%20Guancha.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-10" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-10-tab">
<p><img src="mapas/La%20Matanza%20de%20Acentejo.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-11" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-11-tab">
<p><img src="mapas/La%20Victoria%20de%20Acentejo.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-12" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-12-tab">
<p><img src="mapas/Los%20Silos.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-13" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-13-tab">
<p><img src="mapas/San%20Juan%20de%20la%20Rambla.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-14" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-14-tab">
<p><img src="mapas/Santiago%20del%20Teide.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-15" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-15-tab">
<p><img src="mapas/Tegueste.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
<div id="tabset-1-16" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-16-tab">
<p><img src="mapas/Vilaflor.png" class="img-fluid" style="max-width:100%; max-height:80vh;"></p>
</div>
</div>
</div>
</section>
</section>
<section id="análisis-del-residuo" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Análisis del residuo</h1>
<p>Tras varios procesos iterativos de revisión manual de casos, ajuste de los umbrales e implementación de mejoras se ha conseguido rebajar el <strong>residuo global hasta el 17,75 %</strong>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Nota adicional
</div>
</div>
<div class="callout-body-container callout-body">
<p>En relación con los municipios con mayor porcentaje de hogares no asignados, podría observarse un patrón relacionado con la ruralidad y la capacidad administrativa del ente local. Los porcentajes más elevados se concentran principalmente en municipios rurales y con población dispersa, donde las entidades municipales de menor tamaño cuentan con información limitada y menor capacidad para garantizar una cobertura territorial completa.</p>
</div>
</div>
<p>Después de una evaluación detallada de las 20 calles con mayor número de registros pendientes (alrededor de 1.000 en total), se identificaron las siguientes casuísticas como las más frecuentes en la no asignación:</p>
<ul>
<li>Direcciones <strong>no recogidas en las fuentes comparadas</strong> ni tampoco identificables mediante vista en Google Maps (Ej: Ctra. General del Norte o Calle Caleta del Jurado 5)</li>
<li><strong>Hogares en parcelas sin edificar</strong> (Ej: Calle Limeras o urbanización en Calle Llanos del Poris).</li>
<li><strong>Agrupamientos de viviendas hacinadas</strong> sin portales recogidos en callejeros ni distinguibles a vista de Google Maps (Ej: Playa Barranco Hondo o Lugar Bocacangrejo).</li>
<li>Bloques de viviendas con muchos hogares <strong>sin portal geolocalizado</strong> pero que se comprueba que existen en vista de Google Maps (Ej: Calle Alcalde Juan García Dorta o Calle El Lajial).</li>
<li>Hogares con descripción de calle pero no identificables por numeración incompleta en descripciones de portal como <strong>0000S/999</strong> (Ej: Calle José Gregorio Yanes Dorta o Lugar Bocacangrejo).</li>
</ul>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>